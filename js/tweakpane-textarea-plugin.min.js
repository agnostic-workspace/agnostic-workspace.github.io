!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).TweakpaneTextareaPlugin={})}(this,(function(e){"use strict";const t="tp";function n(e){return t=>n=>{if(!t&&void 0===n)return{succeeded:!1,value:void 0};if(t&&void 0===n)return{succeeded:!0,value:void 0};const i=e(n);return void 0!==i?{succeeded:!0,value:i}:{succeeded:!1,value:void 0}}}function i(e){return{custom:t=>n(t)(e),boolean:n((e=>"boolean"==typeof e?e:void 0))(e),number:n((e=>"number"==typeof e?e:void 0))(e),string:n((e=>"string"==typeof e?e:void 0))(e),function:n((e=>"function"==typeof e?e:void 0))(e),constant:t=>n((e=>e===t?t:void 0))(e),raw:n((e=>e))(e),object:t=>n((e=>{var n;if(null!==(n=e)&&"object"==typeof n)return function(e,t){return Object.keys(t).reduce(((n,i)=>{if(void 0===n)return;const r=(0,t[i])(e[i]);return r.succeeded?Object.assign(Object.assign({},n),{[i]:r.value}):void 0}),{})}(e,t)}))(e),array:t=>n((e=>{var n;if(Array.isArray(e))return n=t,e.reduce(((e,t)=>{if(void 0===e)return;const i=n(t);return i.succeeded&&void 0!==i.value?[...e,i.value]:void 0}),[])}))(e)}}const r={optional:i(!0),required:i(!1)};const o=(a="txtr",(e,n)=>[t,"-",a,"v",e?`_${e}`:"",n?`-${n}`:""].join(""));var a;class s{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(o()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("textarea");n.rows=t.lineCount,n.cols=22,n.placeholder=t.placeholder,n.classList.add(o("i")),t.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,t.value.emitter.on("change",this.onChange_),this.value_=t.value,this.refresh()}refresh(){this.inputElement.value=this.value_.rawValue}onChange_(){this.refresh()}}class l{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.lineCount=t.lineCount,this.placeholder=t.placeholder,this.view=new s(e,{value:this.value,viewProps:this.viewProps,lineCount:this.lineCount,placeholder:this.placeholder}),this.view.inputElement.addEventListener("keyup",this.onInputChange_)}onInputChange_(e){const t=e.currentTarget.value;this.value.rawValue=t,this.view.refresh()}}const u=[{id:"input-template",type:"input",css:".tp-txtrv{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-txtrv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtrv:hover{background-color:var(--in-bg-h)}.tp-txtrv:focus{background-color:var(--in-bg-f)}.tp-txtrv:active{background-color:var(--in-bg-a)}.tp-txtrv:disabled{opacity:.5}.tp-txtrv{display:block;height:auto;padding-bottom:0;overflow:hidden;position:relative}.tp-txtrv.tp-v-disabled{opacity:.5}.tp-txtrv .tp-txtrv_i{font-family:var(--font-family);background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-size:11px;padding:4px;line-height:16px;min-width:0;width:100%;border:none;height:100%;resize:none;margin-bottom:-8px}.tp-txtrv .tp-txtrv_i:focus{outline:none}",accept(e,t){if("string"!=typeof e)return null;const n=r,i=function(e,t){const n=r.required.object(t)(e);return n.succeeded?n.value:void 0}(t,{view:n.required.constant("textarea"),lineCount:n.optional.number,placeholder:n.optional.string});return i?{initialValue:e,params:i}:null},binding:{reader:e=>e=>"string"==typeof e?e:"",writer:e=>(e,t)=>{e.write(t)}},controller(e){var t,n;return new l(e.document,{value:e.value,lineCount:null!==(t=e.params.lineCount)&&void 0!==t?t:3,placeholder:null!==(n=e.params.placeholder)&&void 0!==n?n:"Enter text here",viewProps:e.viewProps})}}];e.plugins=u,Object.defineProperty(e,"__esModule",{value:!0})}));
